(()=>{"use strict";const e=window.React,t=window.wp.plugins,o=window.wp.editPost,l=window.wp.components,a=window.wp.data;(0,t.registerPlugin)("gallop-image-downloader",{render:()=>{const t=wp.data.select("core/editor").getCurrentPostId(),i=(0,a.useSelect)((e=>e("core/editor").getEditedPostAttribute("meta"))),{editPost:n}=(0,a.useDispatch)("core/editor"),s=async()=>{(await wp.apiFetch({path:`/wp/v2/posts/${t}/delete_image`,method:"DELETE"})).success?n({meta:{gallop_zip_file:""}}):console.log("Error deleting the file.")};return(0,e.createElement)(o.PluginDocumentSettingPanel,{name:"gallop-image-downloader",title:"Download Images",className:"gallop-image-downloader"},(0,e.createElement)("p",null,"Download all attached images."),(0,e.createElement)(l.Button,{isPrimary:!0,onClick:async()=>{const e=await wp.apiFetch({path:`/wp/v2/posts/${t}/download_images`,method:"POST"});e?.success&&e?.url?(window.location.href=e.url,n({meta:{gallop_zip_file:e.filename}})):console.log("Error downloading images.")}},"Download Now"),i.gallop_zip_file&&(0,e.createElement)("div",null,(0,e.createElement)("a",{href:"#",onClick:s},i.gallop_zip_file),(0,e.createElement)(l.Button,{isDestructive:!0,onClick:s},"X")))}})})();